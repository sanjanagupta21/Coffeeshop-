{% comment %} {% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>MOON-MOCHA</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free Website Template" name="keywords">
    <meta content="Free Website Template" name="description">

    <!-- Favicon -->
    <link href="app/static/assets/img/favicon.ico" rel="icon">

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"> 

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="app/static/assets/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="app/static/assets/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="app/static/assets/css/style.min.css" rel="stylesheet">
</head>



<div class="container-fluid my-5">
    <div class="container">
        <div class="reservation position-relative overlay-top overlay-bottom">
            <div class="row align-items-center">
                <div class="col-lg-6 my-5 my-lg-0">
                    <div class="p-5">
                        <div class="mb-4">
                            <h1 class="display-3 text-primary">20% OFF</h1>
                            <h1 class="text-white">For Online Reservation</h1>
                        </div>
                        <p class="text-white">At Moon Mocha, we believe in creating a cozy and comfortable environment for you to enjoy our freshly brewed coffee and delicious treats. Whether you're planning a meeting, catching up with friends, or simply need a quiet place to work, our online reservation system makes it easy to secure your spot.</p>
                        <ul class="list-inline text-white m-0">
                            <li class="py-2"><i class="fa fa-check text-primary mr-3"></i><strong>Guaranteed Seating:</strong> No more waiting in line. Your table will be ready when you arrive.</li>
                            <li class="py-2"><i class="fa fa-check text-primary mr-3"></i><strong>Personalized Service:</strong> Let us know your preferences, and we'll make sure everything is just right.</li>
                            <li class="py-2"><i class="fa fa-check text-primary mr-3"></i><strong>Special Requests:</strong> Celebrating a special occasion? Need a highchair or a power outlet? Let us know!</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="text-center p-5" style="background: rgba(51, 33, 29, .8);">
                        <h1 class="text-white mb-4 mt-5">Book Your Table</h1>
                        <form method="post" class="mb-5">
                            {% csrf_token %}
                            <div class="form-group">
                                <input type="text" name="name" class="form-control bg-transparent border-primary p-4" placeholder="Name" required="required" />
                            </div>
                            <div class="form-group">
                                <input type="email" name="email" class="form-control bg-transparent border-primary p-4" placeholder="Email" required="required" />
                            </div>
                            <div class="form-group">
                                <div class="date" id="date" data-target-input="nearest">
                                    <input type="text" name="date" class="form-control bg-transparent border-primary p-4 datetimepicker-input" placeholder="Date" data-target="#date" data-toggle="datetimepicker"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="time" id="time" data-target-input="nearest">
                                    <input type="text" name="time" class="form-control bg-transparent border-primary p-4 datetimepicker-input" placeholder="Time" data-target="#time" data-toggle="datetimepicker"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <select name="persons" class="custom-select bg-transparent border-primary px-4" style="height: 49px;">
                                    <option value="" selected>Person</option>
                                    <option value="1">Person 1</option>
                                    <option value="2">Person 2</option>
                                    <option value="3">Person 3</option>
                                    <option value="4">Person 4</option>
                                </select>
                            </div>
                            
                            <div>
                                <!-- <button class="btn btn-primary btn-block font-weight-bold py-3" type="submit" onclick="location.href='{% url 'success' %}'">Book Now</button> -->
                                <button class="btn btn-primary btn-block font-weight-bold py-3" type="button" onclick="location.href = 'success.html';">Book Now</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
 {% endcomment %}
 {% comment %} <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Reservation</title>
     <style>
         body {
             font-family: 'Arial, sans-serif';
             background-color: #a88261;
             color: #4a4a4a;
             margin: 0;
             padding: 0;
         }
 
         header {
             background-color: #6b4f4f;
             color: white;
             padding: 10px 0;
             text-align: center;
         }
 
         header h1 {
             margin: 0;
             font-size: 2.5em;
         }
 
         nav ul {
             list-style: none;
             padding: 0;
         }
 
         nav ul li {
             display: inline;
             margin: 0 15px;
         }
 
         nav ul li a {
             color: white;
             text-decoration: none;
             font-size: 1.2em;
         }
 
         main {
             padding: 20px;
         }
 
         .booking-form {
             max-width: 600px;
             margin: 0 auto;
             background-color: white;
             padding: 20px;
             border-radius: 10px;
             box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
         }
 
         .booking-form h2 {
             text-align: center;
             color: #6b4f4f;
         }
 
         .booking-form p {
             text-align: center;
             font-size: 1.1em;
         }
 
         .booking-form label {
             display: block;
             margin-top: 10px;
             font-weight: bold;
         }
 
         .booking-form input {
             width: 100%;
             padding: 5px;
             margin-top: 5px;
             margin-bottom: 15px;
             border: 1px solid #ddd;
             border-radius: 5px;
         }
 
         .booking-form button {
             display: block;
             width: 100%;
             padding: 10px;
             background-color: #6b4f4f;
             color: white;
             border: none;
             border-radius: 5px;
             font-size: 1.2em;
             cursor: pointer;
         }
 
         .booking-form button:hover {
             background-color: #543838;
         }
 
         footer {
             background-color: #6b4f4f;
             color: white;
             text-align: center;
             padding: 10px 0;
             position: fixed;
             width: 100%;
             bottom: 0;
         } {% endcomment %}
     {% comment %} </style> {% endcomment %}
     {% comment %} <script>
         function validateForm(event) {
             event.preventDefault();
 
             const name = document.getElementById('name').value;
             const email = document.getElementById('email').value;
             const phone = document.getElementById('phone').value;
             const date = document.getElementById('date').value;
             const time = document.getElementById('time').value;
             const guests = document.getElementById('guests').value;
 
             if (!name || !email || !phone || !date || !time || !guests) {
                 alert("Please fill in all fields.");
                 return false;
             }
 
             if (!validateEmail(email)) {
                 alert("Please enter a valid email address.");
                 return false;
             }
 
             //alert("Your table has been booked successfully!");
             //document.querySelector('form').reset();
         }
 
         function validateEmail(email) {
             const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
             return re.test(String(email).toLowerCase());
         }
 
         document.addEventListener('DOMContentLoaded', function() {
             document.querySelector('form').addEventListener('submit', validateForm);
         });
     </script>
 </head>
 <body>
     <header>
         <h1>Reservation</h1>
         
     </header>
     <main>
         <section class="booking-form">
             <h2>Book Your Table</h2>
             <p>Enjoy a warm and cozy experience at Moon Mocha. Reserve your table now to ensure you have a spot in our delightful environment.</p>
             {% comment %} <form action="{% url 'book_table' %}" method="post"> {% endcomment %}
            {% comment %} <form action="{% url 'book_table' %}" method="post">
                {% csrf_token %} {% endcomment %}
                
                {% comment %}<label for="name">Full Name:</label>
                <input type="text" id="name" name="name" required>
 
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
 
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" required min="10">
 
                <label for="date">Date:</label>
                <input type="date" id="date" name="date" required>
 
                <label for="time">Time:</label>
                <input type="time" id="time" name="time" required>
 
                <label for="guests">Number of Guests:</label>
                <input type="number" id="guests" name="guests" required min="1" max="10"> {% endcomment %}
 
                 {% comment %} <button type="submit" onclick="location.href='{% url 'success' %}'">Book Now</button>
                <button type="submit">Book Now</button>
            </form>
         </section>
     </main>
     
 </body> {% endcomment %}

 {% comment %} </html> {% endcomment %}
 <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     <title>Reservation Form</title>
     <style>
         body {
             font-family: Arial, sans-serif;
             background-color: #f4f4f4;
             color: #333;
             margin: 0;
             padding: 0;
         }
 
         header {
             background-color: #6b4f4f;
             color: white;
             padding: 10px 0;
             text-align: center;
         }
 
         header h1 {
             margin: 0;
             font-size: 2.5em;
         }
 
         main {
             padding: 20px;
         }
 
         .booking-form {
             max-width: 600px;
             margin: 20px auto;
             background-color: white;
             padding: 20px;
             border-radius: 10px;
             box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
         }
 
         .booking-form h2 {
             text-align: center;
             color: #6b4f4f;
         }
 
         .booking-form p {
             text-align: center;
             font-size: 1.1em;
         }
 
         .booking-form label {
             display: block;
             margin-top: 10px;
             font-weight: bold;
         }
 
         .booking-form input {
             width: 100%;
             padding: 10px;
             margin-top: 5px;
             margin-bottom: 15px;
             border: 1px solid #ddd;
             border-radius: 5px;
             box-sizing: border-box;
         }
 
         .booking-form button {
             display: block;
             width: 100%;
             padding: 15px;
             background-color: #6b4f4f;
             color: white;
             border: none;
             border-radius: 5px;
             font-size: 1.2em;
             cursor: pointer;
             margin-top: 10px;
         }
 
         .booking-form button:hover {
             background-color: #543838;
         }
 
         footer {
             background-color: #6b4f4f;
             color: white;
             text-align: center;
             padding: 10px 0;
             position: fixed;
             width: 100%;
             bottom: 0;
         }
 
         #response-message {
             margin-top: 20px;
             text-align: center;
             font-size: 1.2em;
             color: green;
         }
     </style>
 </head>
 <body>
     <header>
         <h1>Reservation</h1>
     </header>
     <main>
         <section class="booking-form">
             <h2>Book Your Table</h2>
             <p>Enjoy a warm and cozy experience at Moon Mocha. Reserve your table now to ensure you have a spot in our delightful environment.</p>
             <form id="reservation-form">
                {% csrf_token %}
                 
                 <label for="name">Full Name:</label>
                 <input type="text" id="name" name="name" required>
 
                 <label for="email">Email:</label>
                 <input type="email" id="email" name="email" required>
 
                 <label for="phone">Phone Number:</label>
                 <input type="tel" id="phone" name="phone" required>
 
                 <label for="date">Date:</label>
                 <input type="date" id="date" name="date" required>
 
                 <label for="time">Time:</label>
                 <input type="time" id="time" name="time" required>
 
                 <label for="guests">Number of Guests:</label>
                 <input type="number" id="guests" name="guests" required min="1" max="10">
 
                 <button type="submit">Book Now</button>
             </form> 

             
 
             <p id="response-message"></p>
         </section>
     </main>
     
 
     {% comment %} <script>
         document.getElementById('reservation-form').addEventListener('submit', function(event) {
             event.preventDefault();
 
             const name = document.getElementById('name').value;
             const email = document.getElementById('email').value;
             const phone = document.getElementById('phone').value;
             const date = document.getElementById('date').value;
             const time = document.getElementById('time').value;
             const guests = document.getElementById('guests').value;
 
             const data = {
                 name: name,
                 email: email,
                 phone: phone,
                 date: date,
                 time: time,
                 guests: guests,
             };
 
             fetch("{% url 'book_table' %}", {
                 method: "POST",
                 headers: {
                     "Content-Type": "application/json",
                     "X-CSRFToken": "{{ csrf_token }}",
                 },
                 body: JSON.stringify(data),
             })
             .then(response => response.json())
             .then(data => {
                 if (data.success) {
                     document.getElementById('response-message').textContent = "Your table has been booked successfully!";
                     document.getElementById('reservation-form').reset();
                 } else {
                     document.getElementById('response-message').textContent = "There was an error booking your table. Please try again.";
                 }
             })
             .catch(error => {
                 console.error('Error:', error);
                 document.getElementById('response-message').textContent = "There was an error booking your table. Please try again.";
             });
         });
     </script> {% endcomment %}

    <script>
        
        {% comment %} document.getElementById('reservation-form').onsubmit = async function(event) {
            event.preventDefault();
            let form = new FormData(this);
            const phoneInput = document.getElementById('phone');
            const phoneValue = phoneInput.value.trim();

        if (phoneValue.length !== 10) {
            alert('Please enter a valid 10-digit phone number.');
            phoneInput.focus();
            event.preventDefault(); // Prevent form submission
            
        }
    
        
            let response = await fetch("", {
                method: "POST",
                body: form,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                }
            });
        
            let result = await response.json();
            if (result.success) {
                Swal.fire({
                    icon: 'success',
                    title: 'Table Booked!',
                    text: 'Your table has been booked successfully.',
                });
                this.reset(); // Clear the form after successful submission
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Booking Failed',
                    text: 'There was an error booking your table. Please try again.',
                });
            }
        };
        
    </script> {% endcomment %}
    document.getElementById('reservation-form').onsubmit = async function(event) {
        event.preventDefault();
        const phoneInput = document.getElementById('phone');
        const phoneValue = phoneInput.value.trim();
    
        // Validate phone number
        if (phoneValue.length !== 10) {
            Swal.fire({
                icon: 'warning',
                title: 'Invalid Phone Number',
                text: 'Please enter a valid 10-digit phone number.',
                confirmButtonText: 'OK',
                customClass: {
                    confirmButton: 'btn btn-warning' // You can add custom styling
                }
            });
            phoneInput.focus();
            return; // Exit the function to prevent submission
        }
    
        // Proceed with form submission
        let form = new FormData(this);
    
        try {
            let response = await fetch("", {
                method: "POST",
                body: form,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                }
            });
    
            let result = await response.json();
            if (result.success) {
                Swal.fire({
                    icon: 'success',
                    title: 'Table Booked!',
                    text: 'Your table has been booked successfully.',
                });
                this.reset(); // Clear the form after successful submission
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Booking Failed',
                    text: 'There was an error booking your table. Please try again.',
                });
            }
        } catch (error) {
            Swal.fire({
                icon: 'error',
                title: 'Booking Failed',
                text: 'There was an error booking your table. Please try again.',
            });
        }
    };
</script>
 </body>
 </html>
 
 
 